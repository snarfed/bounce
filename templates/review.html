{% set body_id = 'review' %}
{% extends "base.html" %}

{% block content %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load("current", {packages:["corechart"]});
  google.charts.setOnLoadCallback(drawCharts);

  function drawCharts() {
    // for donut chart. would be nice instead of pie chart! but it cuts off inner
    // percentage labels when chart is small.
    // opts = {pieHole: 0.4};

    var chart = new google.visualization.PieChart(
      document.getElementById('followers-chart'));
    chart.draw(google.visualization.arrayToDataTable({{ follower_networks|tojson }}));

    chart = new google.visualization.PieChart(
      document.getElementById('follows-chart'));
    chart.draw(google.visualization.arrayToDataTable({{ follow_networks|tojson }}));

    chart = new google.visualization.PieChart(
      document.getElementById('follows-bridged-chart'));
    chart.draw(google.visualization.arrayToDataTable({{ follows_by_bridged|tojson }}));
  }
</script>

<div class="row big">
<p>{% include 'account_label.html' %}</p>
<p>migrating to {{ to_model.PHRASE }}...</p>
</div>

<div class="row">
  <div class="actors col-md-6 col-sm-12">
    <h3>You'll keep <em>all</em> of your followers.</h3>
    <div id="followers-chart" style="width: 400px; height: 400px;"></div>
    <ul>
      {% for actor in followers %}
        <li> {% include 'actor_label.html' %}
      {% endfor %}
    </ul>
  </div>

  <div class="actors col-md-6 col-sm-12">
    <h3>You'll keep <em>{{ keep_follows_pct }}%</em> of your follows.</h3>
    <div id="follows-chart" style="width: 400px; height: 400px;"></div>
    <div id="follows-bridged-chart" style="width: 400px; height: 400px;"></div>
    <ul>
      {% for actor in follows %}
        <li> {% include 'actor_label.html' %}
      {% endfor %}
    </ul>
  </div>
</div>

{% endblock content %}
